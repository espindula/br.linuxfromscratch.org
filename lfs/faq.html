<!--#set var="pageTitle" value="FAQ do LFS" -->
<!--#include virtual="header.html" -->
<!--#include virtual="menu.html" -->
    <div class="main">
      <h1>Perguntas Frequentes do LFS</h1>

      <p>O FAQ está dividido em três documentos. As <a href="/faq/index.html">Perguntas Frequentes gerais</a> tem links para todas as perguntas e respostas. O <a href="/lfs/faq.html">FAQ do LFS</a> é uma seleção de perguntas frequentes específicas do LFS e o <a href="/blfs/faq.html">FAQ do BLFS</a> é uma seleção de perguntas frequentes específicas do BLFS.</p>

      <a id="lfsfaq"/>
      <h3><a href="#fre">Aprimoramentos solicitados frequentemente</a></h3>
      <ul>
        <li><a href="#why-not-faq">Por que não incluir o FAQ no livro?</a></li>
        <li><a href="#why-vim">Por que o vim está no livro?</a></li>
        <li><a href="#why-not-package-management">Por que não existe nenhum gerenciador de pacotes no livro?</a></li>
        <li><a href="#no-poweroff">Como faço para desligar minha máquina no término das atividades?</a></li>
        <li><a href="#uefi">Como inicializo o LFS com UEFI?</a></li>
        <li><a href="#rebuild-ch8">Posso ignorar um pacote do Capítulo 8, vez que ele já foi construído no Capítulo 6 ou 7 e está funcionando corretamente?</a></li>
        <li><a href="#get-rid-of-lib64">Posso modificar o código da GCC e me livrar do /lib64?</a></li>
      </ul>
      <h3><a href="#resources">Ao ler e construir o LFS</a></h3>
      <ul>
        <li><a href="#what-dist">Qual distribuição devo usar para começar?</a></li>
        <li><a href="#kernel-modules">Como eu compilo um núcleo ou configuro módulos?</a></li>
        <li><a href="#gcc-warnings">Os avisos do compilador oriundos do GCC são ruins?</a></li>
        <li><a href="#dirty-sources">Preciso manter o fonte depois da instalação?</a></li>
        <li><a href="#procs-lfs">Existem informações acerca de como construir o LFS em outros processadores?</a></li>
        <li><a href="#cross-compile">Como eu compilo cruzadamente o LFS?</a></li>
        <li><a href="#dos-text">O que é um arquivo de texto no formato DOS?</a></li>
        <li><a href="#wget">Existe uma maneira de baixar todos os arquivos atuais de uma vez?</a></li>
      </ul>
      <h3><a href="#generrors">Erros gerais de compilação</a></h3>
      <ul>
        <li><a href="#optimizations">Ao usar sinalizadores de otimização (configurando a CFLAGS)</a></li>
	<li><a href="#configure-errors">A saída gerada do configure mostra erros/ "gcc -V" não está errado?</a></li>
        <li><a href="#config-ice">Por que o GCC informa "Erro interno do compilador" para um programa "olá mundo"?</a></li>
        <li><a href="#dirty-sources">Eu não excluí a árvore do fonte depois da minha tentativa mais recente. Eu preciso?</a></li>
        <li><a href="#perm-denied">Eu estou obtendo `/dev/null: Permissão negada'</a></li>
        <li><a href="#sig11">sinal 11 (erro interno: Falha de segmentação)</a></li>
        <li><a href="#chroot-no-such-file">“Esse arquivo ou diretório não existe” tentando fazer chroot</a></li>
        <li><a href="#configure-no-such-file">bash: ./configure: Esse arquivo ou diretório não existe</a></li>
        <li><a href="#bad-interpreter-permission-denied">./configure: mau intérprete: Permissão negada</a></li>
        <li><a href="#conf-guess-fail">configure não consegue adivinhar meu tipo de dispositivo.</a></li>
        <li><a href="#config-not-gnu-c">verificando se estamos usando GNU C... não</a></li>
        <li><a href="#no-ptys">O sistema não tem mais ptys. Peça para o(a) administrador(a) do sistema criar mais.</a></li>
        <li><a href="#config-status-0ax-y">./config.status: line 508: 0a1,66: comando não encontrado (ou qualquer mensagem semelhante com apenas números diferentes)</a></li>
        <li><a href="#dev-null-as-cache">"configure: carregando cache /dev/null" em config.log</a></li>
      </ul>
      <h3><a href="#packerrors">Erros específicos de pacote</a></h3>
      <ul>
        <li><a href="#m4-mb-len-max-wrong">M4: Valor assumido de MB_LEN_MAX errado</a></li>
        <li><a href="#systemd-user-credentials-esrch">Systemd: systemd-networkd.service: Falha ao determinar as credenciais de usuário(a): esse processo não existe</a></li>
      </ul>
      <h3><a href="#confboot">Problemas de configuração e inicialização</a></h3>
      <ul>
        <li><a href="#unable-to-mount-root">Pânico de núcleo - não sincronizando: VFS: Não é possível montar o root fs em ...</a></li>
        <li><a href="#respawning-too-fast">init: Id &quot;1&quot; regerando muito rápido: desativado por 5 minutos</a></li>
        <li><a href="#eth0-unknown-interface">eth0:interface desconhecida</a></li>
        <li><a href="#irq-nobody-cared">IRQ 9: ninguém se importou (tente inicializar com a opção "irqpoll")</a></li>
        <li><a href="#lfs-very-slow">O sistema LFS está muito mais lento que a distribuição anfitriã (ou outra distribuição)</a></li>
      </ul>
      <div class="newsItem"></div>

      <h3 id="fre">Aprimoramentos solicitados frequentemente</h3>
      <dl>
        <dt id="why-not-faq">Por que não incluir o FAQ no livro?</dt>
        <dd>

          <p>Marc Heerdink possivelmente tenha dito isso melhor em uma postagem na lfs-dev:</p>

          <blockquote><p>O problema é que o FAQ é um documento dinâmico. O FAQ para um lançamento de livro é lançado somente depois da versão do livro em si, porque o FAQ é atualizado para refletir as perguntas feitas acerca da versão atual do livro. Um link é melhor, pois você sempre terá as respostas mais atualizadas à mão.</p></blockquote>

        </dd>
        <dt id="why-vim">Por que o vim está no livro?</dt>
        <dd>

          <p>Isso é bastante bem discutido no tópico que começa <a href="https://lists.linuxfromscratch.org/sympa/arc/lfs-dev/2002-02/msg00019.html">neste post</a>.</p>

        </dd>
        <dt id="why-not-package-management">Por que não existe nenhum gerenciador de pacotes no livro?</dt>
        <dd>

          <p>O gerenciamento de pacotes – além daquele fornecido por tarballs e makefiles – está além do escopo do livro. Se nada mais acontecer, o número de "soluções" diferentes deveria sugerir alguns dos motivos.</p>

          <p>Aqui estão algumas das opções:</p>
          <ul>

            <li>Nenhum gerenciamento de pacotes é realmente necessário. A menos que seja desejável monitorar minuciosamente o posicionamento do arquivo do pacote, qualquer pacote grande o suficiente para garantir a remoção por motivos de espaço em disco pode ser instalado em /opt, conforme detalhado pelo FHS (talvez em /opt/foo-x.x com um link a partir de /opt/foo), e novos lançamentos geralmente podem ser instalados sobre as antigos, embora as principais atualizações e bibliotecas geralmente sejam melhor feitas reconstruindo-se o sistema de baixo para cima.</li>

            <li>RPM, o Redhat Package Manager, é usado por diversas distribuições. Ele está disponível a partir de <a href="https://rpm.org/">https://rpm.org/</a> e existe uma <a href="../hints/downloads/files/">Dica do RPM</a> para ajudar com a instalação.</li>

            <li>Existem várias implementações de gerenciamento de pacotes no estilo de link simbólico:
            <ul>
              <li>Graft está disponível a partir de <a href="https://peters.gormand.com.au/Home/tools">https://peters.gormand.com.au/Home/tools</a>.</li>
              <li>GNU Stow está disponível a partir de <a href="https://www.gnu.org/software/stow/">https://www.gnu.org/software/stow/</a>.</li>
            </ul>
            </li>
            <li>The NetBSD package manager, pkgsrc, is available on other
            systems including Linux. It is at <a
            href="ftp://ftp.netbsd.org/pub/pkgsrc/stable/">ftp://ftp.netbsd.org/pub/pkgsrc/stable/</a>.</li>
            <li>Originally based on a script written by LFS' own Gerard
            Beekmans, install-log records a list of files installed by a
            package as the package is installed. It is available from <a
            href="https://install-log.sourceforge.net/">https://install-log.sourceforge.net/</a>.</li>
            <li>CheckInstall attempts log system calls made by "make install".
            It is available from <a
            href="https://asic-linux.com.mx/%7Eizto/checkinstall/">https://asic-linux.com.mx/~izto/checkinstall/</a>.</li>
            <li>pkgutils, used by the CRUX distribution, is available from <a
            href="https://crux.nu/Wiki/FaqPkgUtils">https://crux.nu/Wiki/FaqPkgUtils</a>.</li>
            <li>There are some <a href="../hints/downloads/files/">hints</a> available for package managers.</li>
          </ul>
          <p>If you have an addition to the list, please do email its id, URL,
          and other information, to the FAQ maintainer or an appropriate LFS
          mailing list so it can be added here.</p>
        </dd>
        <dt id="no-poweroff">How do I make my machine poweroff when shut down?</dt>
        <dd>
          <p>Power Management is a kernel function, you need to enable it in
          the kernel. In the 5.11 kernel, you have to enable the options for
          <code>ACPI (Advanced Configuration and Power Interface</code>
          under <code>Power managerment and ACPI options</code>.
          For very old 32-bit x86 machines, you'll probably want the APM
          options, newer machines often require ACPI. Make sure that either APM
          or ACPI be enabled in the kernel, but definitely <strong>not</strong>
          both at the same time - this has been known to cause problems such as
          neither actually taking effect. Also try disabling SMP if you only
          have one processor; it's also known to prevent a proper poweroff.
          Make sure you read the help with each option.</p>
          <p>After rebooting into the new kernel you should be able to poweroff
          your machine with the command <code>shutdown -h now</code> or
          <code>poweroff</code> (also read <code>man shutdown</code> and
          <code>man halt</code>). If you compiled APM or ACPI as modules, make
          sure they are loaded before you try to power off.  Some machines
          require that APM or ACPI is compiled into the kernel because it needs
          to be initialised at boottime. </p>
        </dd>

        <dt id="uefi">How do I boot LFS with UEFI?</dt>
        <dd>
          <p>GRUB can be built for UEFI, but doing so needs several packages
          beyond the scope of LFS.  You can consult
          <a href="/blfs/view/svn/postlfs/grub-efi.html">the BLFS page for it</a>.</p>
        </dd>

        <dt id="rebuild-ch8">Can I skip a package in Chapter 8 since it's already built in Chapter 6 or 7, and it's functioning properly?</dt>
        <dd>
          <p>Short answer: no.</p>
          <p>Long answer: we want LFS to be "settled down": if some package
          is rebuilt in the LFS system, the result (libraries and binaries)
          should be same as the result at the end of the LFS book.  In
          Chapter 6 the tools are cross compiled, where many tests in
          the <code>configure</code> script can't be done.  The "guessed"
          result will be used, unnecessary workarounds are enabled, or
          optional features are disabled.  The tools in Chapter 7 are built
          for resolving circular dependencies: many of their optional
          features depend on packages not built yet and have to be
          disabled.  So rebuilding them in Chapter 8 is necessary.</p>
          <p>On the other hand, if you are building Linux for some really
          tiny platform where you can't build packages in a reasonable time
          (for example, a 16 MHz ARM), you can cross compile everything in
          Chapter 6 since Chapter 7 and 8 are not applicable.  Or, you can
          do Chapter 7 and 8 with an emulator like
          <a href="/blfs/view/stable/postlfs/qemu.html">QEMU</a>.</p>
        </dd>
        <dt id="get-rid-of-lib64">Can I modify GCC code and get rid of /lib64?</dt>
        <dd>
          <p>Short answer: no.</p>
          <p>Long answer: LSB mandates the ELF loader to be at
          /lib64/ld-linux-x86-64.so.2 on x86-64.</p>
          <p>Even longer answer: when the kernel is told to execute a
          dynamic linked ELF executable, it reads the path to the ELF loader
          hard-coded in the ELF executable, which is
          /lib64/ld-linux-x86-64.so.2.  So, if it does not exist, LFS won't
          be able to run any dynamic linked executable compiled elsewhere.
          For example, executables from commercial software packages
          (MATLAB or COMSOL) or binaries downloaded from GitHub release
          page will not run.</p>
        </dd>
      </dl>
      <p><a href="#lfsfaq">Back to the top.</a></p>

      <h3 id="resources">When reading and building LFS</h3>
      <dl>
        <dt id="what-dist">What distribution should I use to start from?</dt>
        <dd>
          <p>Most relatively recent distributions should be fine.  You could
          consult
          <a href="/lfs/view/stable/chapter02/hostreqs.html">the Host System Requirements page</a>.</p>
          <p>Make sure you have installed and/or updated the development
          packages. (Look for ones starting in "gcc", "glibc", or "libstdc++"
          or ending in "-dev" or "-devel".)</p>
          <p>If you want to use LFS as your
          main system and you wish to install it without first installing a
          distribution, It is also possible to use a live image on dvd or
          usb stick. All major distributions provide one.</p>
        </dd>
        <dt id="kernel-modules">How do I compile a kernel or set up modules?</dt>
        <dd>
          <p>In /usr/share/doc/linux-x.y.z
          or wherever you unpacked your kernel source and the help in kernel
          config tool (make menuconfig), see the Module-HOWTO at <a
          href="https://www.tldp.org/HOWTO/Module-HOWTO/">https://www.tldp.org/HOWTO/Module-HOWTO/</a>.</p>
        </dd>
        <dt id="gcc-warnings">Are compiler warnings from GCC bad?</dt>
        <dd>
          <p>Short answer: no.</p>
          <p>Long answer: probably, but only to someone working on the package
          you're trying to compile. Mostly, everything will be fine unless make
          quits with an error.</p>
          <p>Here's an example:</p>
          <div class="cmd">
            <p>sk ~/tmp $ cat &gt; Makefile<br />
               main:<br />
               gcc main.c<br />
               sk ~/tmp $ cat &gt; main.c<br />
               void main() { exit(0); }<br />
               sk ~/tmp $ make<br />
               gcc main.c<br />
               <strong>main.c: In function `main':</strong><br />
               <strong>main.c:1: warning: return type of `main' is not `int'</strong><br />
               sk ~/tmp $ ######## that worked ########<br />
               sk ~/tmp $<br />
               sk ~/tmp $ cat &gt; main.c<br />
               int main() { e<span class="strong">xx</span>it(0) }<br />
               sk ~/tmp $ make<br />
               gcc main.c<br />
               <strong>main.c: In function `main':</strong><br />
               <strong>main.c:1: parse error before `}'</strong><br />
               <strong>make: *** [main] Error 1</strong><br />
               sk ~/tmp $ ######## that failed ########<br />
               sk ~/tmp $</p>
          </div>
          <p>If you can determine that some warning indicates a real bug in
          the software, report to the maintainer of it.</p>
        </dd>
<!--        <dt id="really-small">How do I make that really small install the book mentions?</dt>
        <dd>
          <p>Gerard describes the process of making a 5MB LFS install in <a
          href="https://lists.linuxfromscratch.org/sympa/arc/lfs-support/2001-10/msg00057.html">an
          email to lfs-support</a>,  and there are links to many resources in
          <a
          href="https://lists.linuxfromscratch.org/sympa/arc/lfs-support/2002-06/msg00228.html">a
          post by Cor Lem</a> and a reply to it.</p>
        </dd>-->
        <dt id="procs-lfs">Is there information about building LFS on other processors?</dt>
        <dd>
          <p>For information about building LFS for a wide array of systems,
          take a look at the <a
          href="https://trac.clfs.org/wiki/read">Cross-LFS branch</a> of
          LFS.</p>
          <p>For ARM, consult LFS Fork for ARM (64-bit or 32-bit)
(<a href='https://clfs.org/~kb0iic/lfs-sysv'>SysV</a> and
<a href='https://clfs.org/~kb0iic/lfs-systemd'>Systemd</a>),
          maintained by William Harrington; and another LFS ARM64 Branch
          (64-bit only,
<a href='https://www.linuxfromscratch.org/~xry111/lfs/view/arm64-systemd/'>Systemd</a> and
<a href='https://www.linuxfromscratch.org/~xry111/lfs/view/arm64/'>SysV [NOT TESTED!]</a>),
          maintained by Xi Ruoyao.
<!-- Abandoned for now, maybe recontinue when I get some spare time
          <p>For 64-bit little-endian MIPS, Xi Ruoyao has done an experiment
          building LFS on it.
          <a href="/~xry111/lfs-mips64el/">The modified LFS book</a>
          documented the instruction used in the experiment.</p>
-->
        </dd>
        <dt id="cross-compile">How do I cross compile LFS?</dt>
        <dd>
          <p>It's often useful to compile LFS for one machine on another
          machine. Say using that fast 1Ghz Athlon to build an install for an
          old 486. While this is technically not cross compiling, binaries
          compiled for the Athlon cannot be run on the 486 because binaries
          compiled for the newer processor use features the older processor
          doesn't have.</p>
          <p>The LFS book specifically for cross compiling is the <a
          href="https://trac.clfs.org/wiki/read">Cross-LFS</a> book.
          Another source of information would be the <a
          href="/hints/downloads/files/">cross-compiling hint</a>.</p>
          <p>The resources provided above are quite outdated.  You can
          modify the LFS building process after LFS 10.0 (developed
          by Pierre Labestie) to cross compile LFS: set
          <span>$LFS_TGT</span> to the triplet of your target platform,
          and build cross toolchain in Chapter 5 and temporary tools in
          Chapter 6 as normal.  At the end of Chapter 6, build a kernel and
          a bootloader for the target.
          Then copy the temporary system to the target platform, boot it,
          and continue the building from Chapter 7.  Read clfs-ng branch
(<a href='https://www.linuxfromscratch.org/~xry111/lfs/view/clfs-ng/'>SysV</a> and
<a href='https://www.linuxfromscratch.org/~xry111/lfs/view/clfs-ng-systemd/'>Systemd</a>)
          for details.
</p>
        </dd>
        <dt id="dos-text">What's a DOS format text file?</dt>
        <dd>
          <p>It has to do with the characters used to end lines.</p>
          <p>There are two that may be used:</p>
          <ul>
            <li>Line Feed: (LF) Octal:012 Decimal:10 Hex:0A C Style Escape:'\n' Moves down one line.</li>
            <li>Carriage Return: (CR) Octal:015 Decimal:13 Hex:0D C Style Excape:'\r' Move to the left margin.</li>
          </ul>
          <p>Unix, DOS, and MacOS each use a different combination to end lines in text files:</p>
          <ul>
            <li>Unix: LF only. This is why when a Unix format text file is sent to a printer raw, it prints out<br />
                &nbsp;&nbsp;like<br />
                &nbsp;&nbsp;&nbsp;&nbsp;stairs<br />
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;steps.<br /></li>
            <li>DOS: CRLF both. Which is why if you do "cat -v" on a DOS file
            you'll see a "^M" (control m is carriage return) at the end of each
            line. And that is why scripts don't work when written with
            Microsoft Notepad. The kernel looks for "/bin/sh^M" which doesn't
            exist. There's a "/bin/sh", but nothing with a "^M" appended.</li>
            <li>Classic MacOS (before Mac OS X): CR only. Printers probably
            print every line atop the
            first, and Unix tools think the whole file is one line with "^M"
            all through it.  Mac OS X follows Unix convention (LF only).</li>
          </ul>
          <p>To change DOS to Unix, use</p>
          <div class="cmd">
            <p>cp &lt;fileid&gt; &lt;fileid&gt;.dos &amp;&amp;<br />
               cat &lt;fileid&gt;.dos | tr -d '\r' &gt; &lt;fileid&gt;</p>
          </div>
          <p>Or in <code>vim</code>, you can convert a file with <code>:set
          ff={unix, dos, mac}</code>. Other conversions will probably require
          sed or a different use of tr and are left as an exercise for the
          reader.</p>
        </dd>
        <dt id="wget">Is there a way to download all current files at one time?</dt>
        <dd>
          <p>Yes. You can download the file LFS-BOOK-x.y-wget-list <a href=
          "https://www.linuxfromscratch.org/lfs/downloads/stable/wget-list">
          https://www.linuxfromscratch.org/lfs/downloads/stable/wget-list</a>. To download all the files,
          use the version of <code>wget</code> on your host distribution to run:</p>
          
          <code>wget --input-file=LFS-BOOK-x.y-wget-list</code>

        </dd>
      </dl>
      <p><a href="#lfsfaq">Back to the top.</a></p>

      <h3 id="generrors">General compilation errors</h3>
      <dl>
        <dt id="optimizations">When using optimization flags (setting CFLAGS)</dt>
        <dd>
          <p>If you're getting errors and you're setting CFLAGS or otherwise
          passing optimization flags to the compiler that may be the
          problem.</p>
          <p>If you ask on the list and they can't figure it out immediately,
          they'll likely suggest trying it without optimization. So if you just
          retry it without before asking, you'll be one step ahead of them
          :)</p>
          <p>Of particular note is that optimizing binutils, gcc, or glibc may
          cause any other package to fail to compile or run or to otherwise
          misbehave in strange and mysterious ways. Also, optimization that
          works for someone else may not work for you. Flags that used to work
          may mysteriously stop working. Even some small innocent hardware
          change can make the difference.</p>
          <p>(If you don't know what optimization flags are, don't worry, you really don't need to.)</p>
        </dd>
	<dt id="configure-errors">configure output shows errors, isn't "gcc -V" wrong?</dt>
        <dd>
	  <p>To determine what is present on the system, the configure scripts
	  try various commands with various command line options. They then
	  take actions depending on the exit code of the commands. Some
	  of those commands may write error messages, and this is what you
	  see, for example with "gcc -V". But the configure script itself
	  has not failed.</p>
        </dd>
        <dt id="config-ice">Why does GCC reports "Internal Compiler Error" for a "hello world" program?</dt>
        <dd>
          <p>You over optimized gcc.</p>
        </dd>
        <dt id="dirty-sources">I didn't delete the source tree after my last attempt. Do I need to?</dt>
        <dd>
          <p>Yes. In general <code>make clean</code> or <code>make
          dist-clean</code> can't be relied upon for clean sources. Especially
          when you have manually hacked the sources or applied patches to it
          you should first try again with a fresh unpacked package. The only
          exception to this rule is the linux kernel, which requires its
          sources to be present when third-party modules, such as the NVidia
          drivers, are needed.</p>
        </dd>
        <dt id="perm-denied">I'm getting `/dev/null: Permission denied'</dt>
        <dd>
          <p>Does /dev/null look like this:</p>
          <div class="cmd">
            <p>$ ls -l /dev/null<br />
               crw-rw-rw- 1 root root 1, 3 Aug  3  2000 /dev/null</p>
          </div>
          <p>If not, it should. Refer to
          <a href="#dev-null-as-cache">"configure: loading cache /dev/null"
          in config.log</a>.
          <p>If it does look right, the problem is probably your mount options.
          See the answer to "<a
          href="#bad-interpreter-permission-denied">./configure: bad
          interpreter: Permission denied</a>", above.</p>
        </dd>
        <dt id="sig11">signal 11 (internal error: Segmentation fault)</dt>
        <dd>
          <p>The long answer is at <a
          href="https://www.bitwizard.nl/sig11/">https://www.bitwizard.nl/sig11/</a>.</p>
          <p>The short answer is that if restarting make gets a little further
          every time, you have a hardware problem. (If make, or whatever you're
          running, fails at the same place every time, then it is not
          hardware.)</p>
          <p>First, do not overclock the CPU too much.  Note that with an
          Intel "K" (unlocked) CPU, even the default configuration of the
          motherboard is generally already overclocking so you may need to
          even <b>step back</b> from the default especially when the CPU
          is below the average: the individual difference among all CPUs
          of a same model can make a significant effect on the overclocking
          capability so buying an unlocked CPU is some sort of gambling.</p>
          <p>Assuming you're not overclocking, the most likely hardware problem
          is bad memory which you can check with Memtest86+ from <a
          href="https://www.memtest.org/">https://www.memtest.org/</a>.
          <p>CPU overheating is another common hardware problem.  Ensure the
          cooler is properly installed with thermal paste applied.  And,
          some coolers (especially all-in-one liquid coolers) cannot be
          configured via BIOS and they need kernel driver and/or special
          software (for example,
          <a href='https://github.com/liquidctl/liquidctl'>liquidctl</a>) to set
          the parameters correctly.  If such a cooler is not properly
          configured, it can run in a lower speed (or does not run at all).
          If the cooler is already running at full speed but the CPU still
          overheats, either upgrade the cooler, or downclock the CPU via
          BIOS.</p>
          <p>If both bad memory and CPU overheating can be ruled out, see the
          long answer.</p>
        </dd>
        <dt id="chroot-no-such-file">"No such file or directory" trying to chroot</dt>
        <dd>
          <p>Example of this error is:</p>
          <div class="cmd">
            <p>/usr/bin/env: /bin/bash: No such file or directory</p>
          </div>
          <p>If you are sure $LFS/bin/bash exists,
          what happens is likely that the path to the dynamic linker path
          embedded inside the executable is /lib64/ld-linux-x86-64.so.2
          (/lib/ld-linux.so.2 for 32-bit), and
          when one goes to run the binary inside the chroot where
          /lib64/ld-linux-x86-64.so.2 does not exist yet, the very unhelpful
          <code>No such file or directory</code> error message is shown.</p>
          <p>Check if the symlink $LFS/lib64/ld-linux-x86-64.so.2 (it should
          target ../lib/ld-linux-x86-64.so.2, or ../lib/ld-linux.so.2 for
          32-bit) and/or $LFS/lib (it should target usr/lib) are broken.
          Note that these symlinks must be relative (i.e. it should be
          ../lib/ld-linux-x86-64.so.2, <b>not</b>
          $LFS/lib/ld-linux-x86-64-so.2) so they are still vaild in the
          chroot environment.</p>
        </dd>
        <dt id="configure-no-such-file">bash: ./configure: No such file or directory</dt>
        <dd>
          <p>You forgot to <code>cd</code> into the extracted directory of the package after you've extracted it.</p>
        </dd>
        <dt id="bad-interpreter-permission-denied">./configure: bad interpreter: Permission denied</dt>
        <dd>
          <p>You're most likely getting this while building binutils in Chapter
          5 of the LFS Book. The problem is most likely your mount options. You
          probably have a line in /etc/fstab like:</p>
          <code>/dev/sda10  /mnt/lfs  ext2  user  1  2</code>
          <p>'user' is the mount flag, and it's the problem. To quote from the mount man page:</p>
          <cite>user:  Allow  an  ordinary  user to mount the file system. This
          option  implies  the options noexec, nosuid, and nodev (unless
          overridden by subsequent options, as in the option line
          user,exec,dev,suid).</cite>
          <p>So change the line in /etc/fstab like this:</p>
          <code>/dev/sda10  /mnt/lfs  ext2  defaults  1  2</code>
        </dd>
        <dt id="conf-guess-fail">configure can't guess my host type.</dt>
        <dd>
          <p>Typical symptoms look like this:</p>
          <div class="cmd">
            <p>sk ~/tmp-0.0 $ ./configure<br />
               creating cache ./config.cache<br />
               checking host system type...<br />
               <strong>configure: error: can not guess host type; you must specify one</strong><br />
               sk ~/tmp-0.0 $</p>
          </div>
          <p>The problem is usually that the script can't run the compiler.
          Usually it's just a missing /usr/bin/cc symlink. You can fix it like
          this:</p>
          <code>cd /usr/bin &amp;&amp; ln -s gcc cc</code>
          <p>If that doesn't do it, check the file config.log created by
          configure. Errors are recorded there and may indicate the
          problem.</p>
        </dd>
        <dt id="config-not-gnu-c">checking whether we are using GNU C... no</dt>
        <dd>
          <p>If you're getting an error from configure like:</p>
          <div class="cmd">
            <p>checking whether we are using GNU C... no<br />
               configure: error: GNU libc must be compiled using GNU CC</p>
          </div>
          <p>It may be because grep isn't working.
          To test if grep is working in the chroot environment,
          run the following command from <em>inside</em> chroot:</p>
          <code>grep -E root /etc/passwd</code>
          <p>If it doesn't print root's line from /etc/passwd, again, you have
          a problem. (This test also works if you encounter the problem after
          rebooting into the new LFS system.)</p>
        </dd>
        <dt id="no-ptys">The system has no more ptys.  Ask your system
        administrator to create more.</dt>
        <dd>
          <p>If it happens in the LFS chroot environment, ensure your host
          kernel supports UNIX 98 pseudo terminal (all not-so-old desktop
          or server distros should support it), and the virtual kernel
          file systems have been mounted correctly before entering the
          chroot environment.</p>
          <p>If it happens in the complete system built following the SysV
          revision of the LFS book, it's likely you've missed the line for
          the <code>devpts</code> filesystem in <code>/etc/fstab</code>.
        </dd>
        <dt id="config-status-0ax-y">./config.status: line 508: 0a1,66: command not found (or any similar message with only numbers different)<dt>
        <dd>
          <p>Check if <code>config.log</code> contains "configure: loading
          cache /dev/null".  If it's the case, refer to
          <a href='#dev-null-as-cache'>the entry for it</a>.
        </dd>
        <dt id="dev-null-as-cache">"configure: loading cache /dev/null" in
        config.log</dt>
        <dd>
          <p>If it happens in the LFS chroot environment, it's likely you've
          forgotten to bind mount <code>/dev</code> to <code>$LFS/dev</code> in
          "Preparing Virtual Kernel File Systems".</p>
          <p>Exit from the chroot environment first.  Then run
          <code>ls -l /dev/null</code>.  It should output something like
          <code>crw-rw-rw- 1 root root 1, 3 {some date} /dev/null</code>.
          Especially, the first letter <code>c</code> and the numbers
          <code>1, 3</code> must be correct.
          If not, it means your host distro is somehow broken (it may happen
          if you used the dangerous <code>rm -rf $LFS/*</code> command or
          similar when <code>/dev</code> had been bind mounted).  For a modern host
          distro it can be fixed by rebooting (a broken <code>/dev</code> may
          prevent normal rebooting and you may need to use the reset button).
          For a very old host distro, you may need to reinstall it (so why not
          update to a modern one? :)</p>
          <p>Now we've known the host distro is sane.  Make sure
          <code>$LFS</code> is correctly set and the LFS partition is mounted
          first.  Use <code>umount -R $LFS/dev</code> to unmount
          <code>$LFS/dev</code> (in case you've mounted something wrong there),
          then remove everything in <code>$LFS/dev</code> and follow the
          "Preparing Virtual Kernel File Systems" section to mount
          <code>$LFS/dev</code> and <code>$LFS/dev/pts</code> correctly.  Once
          they are mounted, you can reenter the chroot environment and
          continue.</p>
        <dd>
      </dl>
      <p><a href="#lfsfaq">Back to the top.</a></p>

      <h3 id="packerrors">Package-specific errors</h3>
      <dl>
        <dt id="m4-mb-len-max-wrong">M4: Assumed value of MB_LEN_MAX wrong</dt>
        <dd>
          <p>This error message usually indicates that <code>limits.h</code>
          provided by GCC isn't including <code>limits.h</code> from Glibc
          as it should be.  There is one command as a workaround for
          <code>limits.h</code> in GCC Pass 1.  Do not forget to run the
          command.</p>
          <p>In LFS 10.0 through 11.3, there is another command as the
          workaround running <code>mkheaders</code> after installing Glibc
          (Chapter 5).  This command has been removed in LFS 12.0.  Either
          running this command building LFS 12.0 or later (likely because of
          a reuse of old scripts - note that such a reuse is strongly
          discouraged) or forgetting this command building LFS 10.0 through
          11.3 will also lead to this error message.</p>
          <p>If you've encountered this issue, untar the GCC tarball again
          and run the command at the bottom of GCC Pass 1 page to create
          <code>limits.h</code>.  Then if you are building LFS 12.0 or
          later, run <code>rm -f
          $LFS/tools/lib/gcc/$LFS_TGT/*/include-fixed/limits.h</code> which
          would fix the issue in case you've mistakenly run the
          <code>mkheaders</code> command which does not belong to the LFS
          version you are building.  If you are building LFS 11.0 through
          11.3, run the <code>mkheaders</code> command in Chapter 5
          Glibc.</p>
        </dd>

        <dt id="systemd-user-credentials-esrch">Systemd: systemd-networkd.service: Failed to determine user credentials: No such process</dt>
        <dd>
          <p>It's likely because <code>/etc/passwd</code> for sysv revision
          is misused in systemd-based system.  "No such process" is just the
          "standard" error message for <code>ESRCH</code>, it's not very
          helpful for diagnosis of this issue.</p>
        </dd>
      </dl>
      <p><a href="#lfsfaq">Back to the top.</a></p>

      <h3 id="confboot">Configuration and booting issues</h3>
      <dl>
        <dt id="unable-to-mount-root">Kernel panic - not syncing: VFS: Unable to mount root fs on ...</dt>
        <dd>
          <p>There are several reasons why the kernel might be unable to mount the root filesystem.</p>
          <ul>
            <li>Did you specify the correct partition in
            <code>/boot/grub/grub.cfg</code>?</li>
            <li>Is support for the hard drive enabled in the kernel. For SCSI
            this means support for the specific SCSI adapter.</li>
            <li>Is support for the hard drive compiled into the kernel, not
            just as a module. (Modules are stored on the filesystem. If a
            driver needed to access the filesystem is stored as a module on
            that filesystem, well ... you know ... ;)</li>
            <li>Is support for the filesystem compiled into the kernel. Again,
            not a module. Support for ext4 is enabled by default, but others
            like reiser, jfs, and xfs are not.</li>
          </ul>
        </dd>
        <dt id="respawning-too-fast">init: Id "1" respawning too fast: disabled for 5 minutes</dt>
        <dd>
          <p>When you see, in your syslogs, this line:</p>
          <code>init: Id "1" respawning too fast: disabled for 5 minutes</code>
          <p>It means you have an error in the /etc/inittab line beginning with the given id ("1" in this example).</p>
        </dd>
        <dt id="eth0-unknown-interface">eth0:unknown interface:No such device [failed] </dt>
        <dd>
          <p>The full error looks like this:</p>
          <div class="cmd">
            <p>eth0:unknown interface:No such device [failed]<br />
               Setting up default gateway...<br />
               SIOCADDRT:No such device [failed]</p>
          </div>
          <p>eth0 is a virtual device with no /dev entry. It refers to the
          first detected network card in your system. The reason the kernel
          can't find this device is because you forgot to add support for your
          network card in the kernel. The kernel detected the card but doesn't
          have a driver for it. The LFS boot script tries to bring up the
          network but fails because of this.</p>
          <p>Recompile your kernel with the proper driver, either built in or
          as a module. If you compiled the network driver as a module, then
          also adjust /etc/modules.conf to alias the network card module as
          eth0; for example: <code>alias eth0 8139too</code>. If you don't know
          which network card you have, you can use <code>dmesg</code>,
          /proc/pci or <code>lspci</code> to find out.</p>
          <p>And, udev may rename your network devices.  For example, eth0
          may be renamed to enp4s0.  You can run <code>ip link</code>
          command after booting the LFS system, and examine the output to
          know the name of your network devices.</p>
        </dd>
        <dt id="irq-nobody-cared">irq 9: nobody cared (try booting with the "irqpoll" option)</dt>
        <dd>
          <p>It may be a bug in the firmware (BIOS) or the drivers in
          kernel.  Some hardware vendors tend to use Windows-specific hacks
          in their BIOS, which is misinterpreted by Linux kernel and causing
          this kind of issue.</p>
          <p>If you see message like this but your system functions
          normally, you can ignore it.  If the system malfunctions, you can
          try the combinations of several kernel options to workaround:
          <code>irqpoll</code>, <code>noapic</code>, <code>pci=nocrs</code>,
          and <code>i8042.nopnp=1</code>.</p>
          <p>And, you can try <a href="https://wiki.archlinux.org/title/DSDT">ACPI DSDT override</a> if you
          really understand it.</p>
          <p>You can always report this kind of issue to
          <a href="https://bugzilla.kernel.org">Kernel bug tracker</a>,
          no matter if it's a BIOS bug.  The kernel developers want to make
          Linux runable even if the BIOS has this kind of bug.</p>
        </dd>
        <dt id="lfs-very-slow">LFS system is much slower than the host distro (or another distro)</dt>
        <dd>
          <p>If the LFS system is slower than another distro but not much
          slower, it's normal. We focus on building a Linux system from
          source code and we do nothing to tweak the system for marginal
          performance improvements.  The other distros may enable additional
          compiler optimizations, tune kernel options (via sysctl), or use
          other approaches to squeeze more performance out.  And, LFS uses
          a latest GCC release which is likely slower than an old GCC
          release.  A new GCC release often attempts to optimize the target
          code more heavily (these optimizations will slow down the
          compiliation, but hopefully make the compiled program faster).  So
          LFS will take more time building a large package (like Linux
          kernel).</p>
          <p>But, if the LFS system is <b>very</b> slow (for example, takes
          5 hours to build a kernel while the host distro needs only one
          hour to build the same kernel with exactly same configuration),
          it likely indicates a CPU dynamic frequency scaling issue.  You
          can monitor the value of "cpu MHz" in <code>/proc/cpuinfo</code>
          to see if your CPU is running at a reasonable frequency while a
          workload (like, building the kernel) is running on the CPU.</p>
          <p>If your CPU is running at a much lower frequency than expected
          (an Intel Core i3 building the kernel but running at only 800 MHz
          is definitely too slow), try to adjust the setting of "Default
          CPUFreq governor" in the kernel configuration and rebuild the
          kernel.  The ideal setting should limit the CPU at a low frequency
          when the system is idle, but boost it to the maximum performance
          while a workload is running.</p>
          <p>Note that a governor may behave differently on different CPUs. 
          For example, the "powersave" governor may work fine for one CPU
          model, but lock another CPU at 800 MHz no matter if there is a
          workload running.  If you can't (or don't want to spend too much
          time to) find an ideal setting, use the "performance" governor.</p>
          <p>On a modern Intel or AMD processor, the "energy performance
          preference" may also have a significant impact on the performance
          The default setting is usually "balance performance" which may
          severely throttle down the performance, especially when the CPU
          has many cores but only a few cores are utilized (for example,
          when measuring the SBU with <code>make -j1</code> on a
          Core i9-13900K). The easiest way to manange the energy performance
          preference is via power-profiles-daemon, read
          <a href='../blfs/view/svn/general/power-profiles-daemon.html'
             >power-profiles-daemon (SysV)</a> or
          <a href='../blfs/view/systemd/general/power-profiles-daemon.html'
             >power-profiles-daemon (Systemd)</a> for how to install and
          use it.  Alternatively you can try to change this setting via
          the BIOS if a configuration entry is provided.</p>
        </dd>
      </dl>

<!--#include virtual="/common/footer.html" -->
